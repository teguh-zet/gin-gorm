<!DOCTYPE html>
<html>
<body>
    <h2>Test WebSocket Notification</h2>
    <input type="text" id="token" placeholder="Paste JWT Token disini" style="width: 300px;">
    <button onclick="connect()">Connect</button>
    <div id="status" style="margin-top: 10px; color: gray;">Status: Disconnected</div>
    <h3>Pesan Masuk:</h3>
    <pre id="output" style="background: #f4f4f4; padding: 10px; border: 1px solid #ddd;"></pre>

    <script>
        var ws;
        function connect() {
            var token = document.getElementById("token").value;
            // Ganti URL sesuai port server Anda
            ws = new WebSocket("ws://localhost:8080/ws?token=" + token);

            ws.onopen = function() {
                document.getElementById("status").innerText = "Status: Connected ✅";
                document.getElementById("status").style.color = "green";
            };

            ws.onmessage = function(event) {
                // Saat ada pesan dari server (NATS), akan muncul disini
                var log = document.getElementById("output");
                log.innerHTML += event.data + "\n";
            };

            ws.onclose = function() {
                document.getElementById("status").innerText = "Status: Disconnected ❌";
                document.getElementById("status").style.color = "red";
            };
        }
    </script>
</body>
</html>